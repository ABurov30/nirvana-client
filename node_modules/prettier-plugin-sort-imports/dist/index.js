var q=Object.create;var I=Object.defineProperty,Q=Object.defineProperties,X=Object.getOwnPropertyDescriptor,Z=Object.getOwnPropertyDescriptors,ee=Object.getOwnPropertyNames,_=Object.getOwnPropertySymbols,te=Object.getPrototypeOf,x=Object.prototype.hasOwnProperty,re=Object.prototype.propertyIsEnumerable;var G=(e,t,r)=>t in e?I(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,b=(e,t)=>{for(var r in t||(t={}))x.call(t,r)&&G(e,r,t[r]);if(_)for(var r of _(t))re.call(t,r)&&G(e,r,t[r]);return e},A=(e,t)=>Q(e,Z(t)),V=e=>I(e,"__esModule",{value:!0});var ne=(e,t)=>{for(var r in t)I(e,r,{get:t[r],enumerable:!0})},F=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of ee(t))!x.call(e,o)&&(r||o!=="default")&&I(e,o,{get:()=>t[o],enumerable:!(n=X(t,o))||n.enumerable});return e},k=(e,t)=>F(V(I(e!=null?q(te(e)):{},"default",!t&&e&&e.__esModule?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e),oe=(e=>(t,r)=>e&&e.get(t)||(r=F(V({}),t,1),e&&e.set(t,r),r))(typeof WeakMap!="undefined"?new WeakMap:0);var Ee={};ne(Ee,{importNewline:()=>S,options:()=>K,parsers:()=>ke});var L=require("prettier/parser-typescript"),O=require("prettier/parser-babel");function $(e){return[...e].sort((t,r)=>{let n=t.importPath,o=r.importPath;return n<o?-1:n>o?1:0})}function D(e){return[...e].sort((t,r)=>{let n=t.import.getText().length,o=r.import.getText().length;return n===o&&t.importPath&&r.importPath?r.importPath.length-t.importPath.length:o-n})}var a=k(require("typescript"));function le(e){if(e.importTypeOrder.length!==0){if(e.importTypeOrder.includes("all")){if(e.importTypeOrder.length>1)throw new Error(`You cannot use the "${"all"}" import type with other types.`);return}if(e.importTypeOrder.includes("localImports")&&(e.importTypeOrder.includes("localImportsValue")||e.importTypeOrder.includes("localImportsType")))throw new Error(`You cannot use the "${"localImports"}" import type with other local import types. Choose between either using "${"localImports"}" (so all local imports) or specifying the order in which local imports are sorted by specifying both type and value options.`);if(e.importTypeOrder.includes("localImportsType")!==e.importTypeOrder.includes("localImportsValue"))throw new Error(`You must specify both the "${"localImportsType"}" and "${"localImportsValue"}" import types or use the "${"localImports"}" type that captures them both.`);if((e.importTypeOrder.includes("localImportsType")||e.importTypeOrder.includes("localImportsValue")||e.importTypeOrder.includes("localImports")||e.importTypeOrder.includes("NPMPackages"))&&(e.importTypeOrder.includes("localImportsType")||e.importTypeOrder.includes("localImportsValue")||e.importTypeOrder.includes("localImports"))!==e.importTypeOrder.includes("NPMPackages"))throw new Error(`You must specify one local-value import type (such as "${"localImports"}") and one npm-package import type (such as "${"NPMPackages"}") or none at all.`)}}function Y(e){le(e)}var K={sortingMethod:{since:"1.15.0",category:"Global",type:"choice",default:"lineLength",description:"Which sorting method to use",choices:[{value:"alphabetical",description:"Sort imports alphabetically by the import path"},{value:"lineLength",description:"Sort by line length, descending"}]},stripNewlines:{since:"1.15.0",category:"Global",type:"boolean",default:!1,description:"Whether to strip newlines between blocks (joining blocks)"},importTypeOrder:{since:"1.15.0",category:"Global",array:!0,type:"choice",default:[{value:["all"]}],description:"Order in which to sort import types. Does not take import type into account by default.",choices:[{value:"NPMPackages",description:"NPM packages, inferred from your package.json file"},{value:"localImportsValue",description:"Value imports from within this project. Value imports are all non type-only imports"},{value:"localImportsType",description:"Type imports from within this project. Only available in typescript."},{value:"localImports",description:`All imports from within this project. Cannot be used together with any of the other "${"localImports"}" options`},{value:"all",description:"Every type of import. This is the default and means import type is not taken into account."}]},packageJSONFiles:{since:"1.15.0",category:"Global",array:!0,type:"string",default:[{value:["./package.json"]}],description:"Paths to package.json files relative to the .prettierrc.json file. These files will be used to infer NPM packages"},newlineBetweenTypes:{since:"1.15.0",category:"Global",type:"boolean",default:!1,description:"Puts a newline between imports of different groups (see importTypeOrder)"}};var j=require("prettier"),U=require("module"),g=k(require("path")),W=k(require("fs"));function ce(e,t){let r=[],n,o=process.cwd();for(let c of t){let i=(()=>{if(g.isAbsolute(c))return c;{n===void 0&&(n=j.resolveConfigFile.sync(e));let p=n?g.dirname(n):o;return g.join(p,c)}})(),s=W.readFileSync(i,"utf8");try{let p=JSON.parse(s);if(p.dependencies)for(let u in p.dependencies)r.push(u);if(p.devDependencies)for(let u in p.devDependencies)r.push(u)}catch(p){console.warn("Failed to parse package.json file:",i)}}return[...new Set(r)]}function H(e,t){let r=[];for(let n=0;n<e.length;n++){let o=e[n];t.includes(o)&&(r[n]=t.indexOf(o))}if(r.length!==e.length||r.length!==t.length)throw new Error("Unknown import type specified");return r}var m=class{constructor(t){this.values=t}};function E(e){return(...t)=>{let r=[];for(let n of e){let o=t[n];r.push(o)}return r}}var pe=U.builtinModules.filter(e=>!e.startsWith("_"));function z(e,t){let r=t.slice(1,-1);return[...e,...pe].some(n=>r.startsWith(n))}function ae(...e){for(let t of e)if(t!==-1)return t;return-1}function J({importTypeOrder:e,packageJSONFiles:t,filepath:r}){if(e.includes("all"))return;let n=ce(r,t);if(e.includes("localImportsValue")||e.includes("localImportsType")){let l=E(H(e,["localImportsValue","localImportsType","NPMPackages"])),c=e.indexOf("NPMPackages")<ae(e.indexOf("localImportsValue"),e.indexOf("localImports")),i=E(c?[0,1]:[1,0]);return s=>{let p=[],u=[],f=[],h=[];for(let d of s){let v=z(n,d.importPath);d.isTypeOnly?v?h.push(d):u.push(d):v?f.push(d):p.push(d)}return l(p,new m(i(h,u)),f)}}let o=E(H(e,["NPMPackages","localImports"]));return l=>{let c=[],i=[];for(let s of l)z(n,s.importPath)?i.push(s):c.push(s);return o(i,c)}}var ue=1e3*60*2.5;function w(e,t){let r=0;for(;e.includes(t);){r++;let n=e.indexOf(t);e=e.slice(0,n)+e.slice(n+1)}return r}var S=Symbol("importNewline");function me(e,t){let r=a.getTrailingCommentRanges(e,t.getFullStart()+t.getFullWidth());return r?r[r.length-1]:null}function fe(e,t){let r=a.getLeadingCommentRanges(e,t.getFullStart());return r?r[0]:null}function de(e,t,r,n,o){let c=e[e.length-1].length,i=r.getStart(),s=fe(t,r);s&&!he(t,s)&&c!==0&&(i=s.pos);let p=r.end,u=me(t,r);return u&&(p=u.end),{import:r,start:i,importPath:n,end:p,isTypeOnly:o,startLine:M(t,i),endLine:M(t,p)}}function ge(e,t,r){for(let n of r)if(t>=n.start&&t<n.end||e>=n.start&&e<n.end)return!0;return!1}function he(e,t){let r=e.slice(t.pos,t.end);return r.includes(C)||r.includes(N)}function Ie(e){if(a.isImportDeclaration(e))return e.moduleSpecifier.getText();{if(e.declarationList.declarations.length!==1)return null;let t=e.declarationList.declarations[0];if(!a.isVariableDeclaration(t))return null;let r=t.initializer;return!r||!a.isCallExpression(r)?null:r.arguments[0].getText()}}function Se(e,t,r){var c;let n=[[]],o=e.getChildren()[0].kind===a.SyntaxKind.SyntaxList?e.getChildren()[0].getChildren():e.getChildren(),l=null;for(let i of o)if(a.isImportDeclaration(i)||a.isVariableStatement(i)&&i.declarationList&&i.declarationList.declarations.length===1&&a.isVariableDeclaration(i.declarationList.declarations[0])&&i.declarationList.declarations[0].initializer&&a.isCallExpression(i.declarationList.declarations[0].initializer)&&i.declarationList.declarations[0].initializer.expression.getText()==="require"){if(l){let p=i.getStart(),u=l.end,f=a.getLeadingCommentRanges(e.getFullText(),i.getFullStart());f&&f.length&&(p=f[0].pos);let h=e.getFullText().slice(u,p);if(ge(p,i.getEnd(),r)){n.push([]),l=null;continue}t&&h.trim()!==""?n.push([]):!t&&w(h,`
`)>1&&n.push([])}let s=Ie(i);if(s){let p=de(n,e.getFullText(),i,s,!!(a.isImportDeclaration(i)&&((c=i.importClause)==null?void 0:c.isTypeOnly)));l=p,n[n.length-1].push(p)}else l=null}return n.filter(i=>i.length>0)}function ye(e){return e.map(t=>t===S?t:t.startsWith(`
`)?t.slice(1):t)}function Le(e,t,r){let n=r?r(e):[e],o=t.sortingMethod==="alphabetical"?$:D,c=n.map(s=>s instanceof m?new m(s.values.map(o)):o(s)).filter(s=>s instanceof m?s.values.filter(p=>p.length>0).length>0:s.length>0),i=[];for(let s=0;s<c.length;s++){let p=c[s];if(p instanceof m)for(let u of p.values)i=i.concat(u);else i=i.concat(p);t.newlineBetweenTypes&&s<c.length-1&&i.push(S)}return i}function Oe(e,t,r,n){if(e.length===0)return t;let o=Le(e,r,n),l=t.split(`
`),c=[];for(let s of o)s===S?c.push(s):c.push(...l.slice(s.startLine,s.endLine+1));r.stripNewlines&&(c=ye(c));let i=c.map(s=>s===S?"":s);return[...l.slice(0,e[0].startLine),...i,...l.slice(e[e.length-1].endLine+1)].join(`
`)}var C="sort-imports-begin-ignore",P=[`//${C}`,`// ${C}`],N="sort-imports-end-ignore",B=[`//${N}`,`// ${N}`];function R(e,t){for(let r of t){let n=e.indexOf(r);if(n!==-1)return n}return-1}function Pe(e,t){let r=P.reduce((o,l)=>o+w(t,l),0),n=B.reduce((o,l)=>o+w(t,l),0);return r!==n?(console.warn(`Number of ignore begin and end comments do not match in file "${e!=null?e:"input"}". Found ${r} begin comments and ${n} end comments. Skipping file`),!1):!0}function M(e,t){let r=e.split(`
`),n=0;for(let o=0;o<r.length;o++){let l=r[o].length+1;if(n+l>t)return o;n+=l}return-1}function Te(e){let t=[];if(R(e,P)===-1)return[];let r=e,n=0,o;for(;(o=R(e,P))!==-1;){let l=n+o;n=n+o+P[0].length,e=e.slice(n);let c=R(e,B);if(c===-1)return console.warn(`Failed to find end ignore comment for ignore begin comment on line ${M(r,l)}, ignoring file`),null;t.push({start:l,end:n+c}),n=n+c+B[0].length,e=e.slice(n)}return t}var y=null,be=!1;function Ae(e,t=!1){return y&&!process.argv.includes("--sort-imports-reinit")&&!t||(be&&setInterval(()=>{y=null},ue).unref(),Y(e),y={importTypeSorter:J(e)}),y}function T(e,t,r=!1){if(e.includes("// sort-imports-ignore")||e.includes("//sort-imports-ignore")||!Pe(t.filepath,e))return e;let n=Ae(t,r),o=Te(e);if(o===null)return e;let l=t.filepath||"file.ts",c=a.createSourceFile(l,e,a.ScriptTarget.Latest,!0,l.endsWith("ts")?a.ScriptKind.TS:a.ScriptKind.TSX),i=Se(c,t.stripNewlines,o).reverse();for(let s of i)e=Oe(s,e,t,n.importTypeSorter);return e}var ke={typescript:A(b({},L.parsers.typescript),{preprocess:L.parsers.typescript.preprocess?(e,t,r)=>T(L.parsers.typescript.preprocess(e,t),t,r==null?void 0:r.clearCache):T}),babel:A(b({},O.parsers.babel),{preprocess:O.parsers.babel.preprocess?(e,t)=>T(O.parsers.babel.preprocess(e,t),t):T})};module.exports=oe(Ee);0&&(module.exports={importNewline,options,parsers});
